(self.webpackChunkessential_mend=self.webpackChunkessential_mend||[]).push([[838],{7535:(e,l,a)=>{"use strict";function t(e,l,a={}){"failure"===l&&(l="danger");const t=document.createElement("div");t.classList.add("position-fixed","ultra-z-index","top-0","start-50","translate-middle-x","alert",`alert-${l}`,"fade-in"),t.textContent=e,document.body.appendChild(t),setTimeout((()=>{setTimeout((()=>{document.body.removeChild(t),a.reloadOnTimeout&&window.location.reload()}),500)}),3e3),a.forceReload&&window.location.reload()}function n(e,l){e&&setTimeout((()=>{window.location.href=e}),l||0)}a.d(l,{T:()=>t,V:()=>n})},1522:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>b});var t=a(822),n=a(4526),o=a(7416),u=a(4390),s=a(7535),i=a(4947),r=a.n(i),c=a(3826);const d={class:"w-100 bg-white d-flex flex-column align-items-center justify-content-center",style:{"min-height":"100vh"}},v={class:"h-100 d-flex flex-column align-items-center justify-content-center"},p={class:"d-flex flex-column w-100 gap-2"},m={key:0},f={class:"d-flex flex-column w-100 gap-2"},h={class:"input-group position-relative"},k=["value"],b={__name:"Register",setup(e){const l=(0,c.C)(),a=(0,u.KR)(!1),i=(0,u.KR)(!1),b=(0,u.KR)("Sign In Now"),y=(0,u.KR)("Sign In"),w=(0,u.KR)("New User? Sign Up"),g=(0,u.KR)(!1),x=()=>{a.value=!a.value,a.value?(b.value="Sign Up Now",y.value="Sign Up",w.value="Already a User? Sign In"):(b.value="Sign In Now",y.value="Sign In",w.value="New User? Sign Up"),i.value=!1,U.value="user",K.value="",S.value="",T.value="",V.value="",X.value="",q.value="default",I.value="",J.value="",Q.value="",_.value=""},C={email:/^[a-z0-9_.+-]+@[a-z0-9-]+\.[a-z]+$/,name:/^[a-zA-Z0-9. ]+$/,password:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/},L=()=>{const e={email:S.value,password:T.value};if(a.value&&Object.assign(e,{userType:i.value?"professional":"user",name:K.value,location:V.value,pincode:X.value,service:q.value,experience:I.value,description:J.value,duration:Q.value,price:_.value}),((e={})=>{const{userType:t,name:n,email:o,password:u,service:s,experience:i,description:r,location:c,pincode:d,duration:v,price:p}=e;let m=!0;return a.value?0===c.length||d.length<6?m=!1:("user"!==t||C.name.test(n)&&C.email.test(o)&&C.password.test(u))&&("professional"!==t||C.name.test(n)&&C.email.test(o)&&C.password.test(u)&&l.availableServices.find((e=>e.sid===s))&&i>=0&&r?.length>0)?"professional"===t&&(v<=0||p<=0)&&(m=!1):m=!1:C.email.test(o)&&C.password.test(u)||(m=!1),m})(e)){const l=a.value?"/api/signup":"/api/signin",t=new FormData;Object.keys(e).forEach((l=>{t.append(l,e[l])}));const n=r().SHA256(T.value).toString();t.set("password",n),fetch(l,{method:"POST",body:t}).then((e=>e.json())).then((e=>{(0,s.T)(e.data.message,e.result),"success"===e.result&&setTimeout((()=>{(0,s.V)("/dashboard")}),3e3)})).catch((e=>{(0,s.T)("Invalid credentials","error")}))}else(0,s.T)("Invalid credentials","warning")},R=()=>{const e=document.getElementById("password");"password"===e.type?(e.type="text",g.value=!0):(e.type="password",g.value=!1)},E=e=>{i.value="professional"===e.target.value},U=(0,u.KR)("user"),K=(0,u.KR)(""),S=(0,u.KR)(""),T=(0,u.KR)(""),V=(0,u.KR)(""),X=(0,u.KR)(""),q=(0,u.KR)("default"),I=(0,u.KR)(""),J=(0,u.KR)(""),Q=(0,u.KR)(""),_=(0,u.KR)("");return(0,t.sV)((()=>{fetch("/api/services").then((e=>e.json())).then((e=>{l.availableServices=e.data.services})).catch((e=>{(0,s.T)("Error fetching services:","danger")}))})),(e,s)=>((0,t.uX)(),(0,t.CE)("main",d,[(0,t.Lk)("article",v,[s[13]||(s[13]=(0,t.Lk)("header",null,[(0,t.Lk)("h1",null,[(0,t.Lk)("i",{class:"bi bi-wrench-adjustable-circle"}),(0,t.Lk)("span",null,"EssentialMend")])],-1)),(0,t.Lk)("article",p,[(0,t.Lk)("h2",null,(0,n.v_)(b.value),1),a.value?((0,t.uX)(),(0,t.CE)("section",m,[(0,t.bo)((0,t.Lk)("select",{class:"form-select",onChange:E,"onUpdate:modelValue":s[0]||(s[0]=e=>U.value=e)},s[11]||(s[11]=[(0,t.Lk)("option",{value:"user"},"User",-1),(0,t.Lk)("option",{value:"professional"},"Professional",-1)]),544),[[o.u1,U.value]])])):(0,t.Q3)("v-if",!0),(0,t.Lk)("section",f,[a.value?(0,t.bo)(((0,t.uX)(),(0,t.CE)("input",{key:0,type:"text",name:"name",class:"form-control",placeholder:"Full Name",required:"","onUpdate:modelValue":s[1]||(s[1]=e=>K.value=e)},null,512)),[[o.Jo,K.value]]):(0,t.Q3)("v-if",!0),(0,t.bo)((0,t.Lk)("input",{type:"text",name:"email",class:"form-control",placeholder:"Email",required:"","onUpdate:modelValue":s[2]||(s[2]=e=>S.value=e)},null,512),[[o.Jo,S.value]]),(0,t.Lk)("div",h,[(0,t.bo)((0,t.Lk)("input",{id:"password",type:"password",name:"password",class:"form-control has-validation",placeholder:"Password",required:"","onUpdate:modelValue":s[3]||(s[3]=e=>T.value=e)},null,512),[[o.Jo,T.value]]),(0,t.Lk)("i",{class:(0,n.C4)([g.value?"bi bi-eye-fill":"bi bi-eye-slash-fill","position-absolute end-0 me-2 mt-2 z-index"]),onClick:R},null,2)]),a.value?(0,t.bo)(((0,t.uX)(),(0,t.CE)("input",{key:1,type:"text",name:"location",class:"form-control",placeholder:"Location",required:"","onUpdate:modelValue":s[4]||(s[4]=e=>V.value=e)},null,512)),[[o.Jo,V.value]]):(0,t.Q3)("v-if",!0),a.value?(0,t.bo)(((0,t.uX)(),(0,t.CE)("input",{key:2,type:"number",name:"pincode",class:"form-control",placeholder:"Pincode",maxlength:"6",required:"","onUpdate:modelValue":s[5]||(s[5]=e=>X.value=e)},null,512)),[[o.Jo,X.value]]):(0,t.Q3)("v-if",!0),a.value&&i.value?(0,t.bo)(((0,t.uX)(),(0,t.CE)("select",{key:3,name:"serviceType",class:"form-select","onUpdate:modelValue":s[6]||(s[6]=e=>q.value=e)},[s[12]||(s[12]=(0,t.Lk)("option",{value:"default"},"Default",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,u.R1)(l).availableServices,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.sid,value:e.sid},(0,n.v_)(e.name),9,k)))),128))],512)),[[o.u1,q.value]]):(0,t.Q3)("v-if",!0),a.value&&i.value?(0,t.bo)(((0,t.uX)(),(0,t.CE)("input",{key:4,type:"text",name:"experience",class:"form-control",placeholder:"Experience",required:"","onUpdate:modelValue":s[7]||(s[7]=e=>I.value=e)},null,512)),[[o.Jo,I.value]]):(0,t.Q3)("v-if",!0),a.value&&i.value?(0,t.bo)(((0,t.uX)(),(0,t.CE)("input",{key:5,type:"text",name:"description",class:"form-control",placeholder:"Description",required:"","onUpdate:modelValue":s[8]||(s[8]=e=>J.value=e)},null,512)),[[o.Jo,J.value]]):(0,t.Q3)("v-if",!0),a.value&&i.value?(0,t.bo)(((0,t.uX)(),(0,t.CE)("input",{key:6,type:"text",name:"duration",class:"form-control",placeholder:"Duration",required:"","onUpdate:modelValue":s[9]||(s[9]=e=>Q.value=e)},null,512)),[[o.Jo,Q.value]]):(0,t.Q3)("v-if",!0),a.value&&i.value?(0,t.bo)(((0,t.uX)(),(0,t.CE)("input",{key:7,type:"text",name:"price",class:"form-control",placeholder:"Price",required:"","onUpdate:modelValue":s[10]||(s[10]=e=>_.value=e)},null,512)),[[o.Jo,_.value]]):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("section",null,[(0,t.Lk)("button",{class:"btn btn-dark",onClick:L},(0,n.v_)(y.value),1)]),(0,t.Lk)("section",null,[(0,t.Lk)("button",{class:"btn btn-dark",onClick:x},(0,n.v_)(w.value),1)])])])]))}}},477:()=>{}}]);