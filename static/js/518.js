"use strict";(self.webpackChunkessential_mend=self.webpackChunkessential_mend||[]).push([[518],{1518:(e,a,s)=>{s.r(a),s.d(a,{default:()=>q});var l=s(822),i=s(7416),r=s(4390),t=s(4526),v=s(3826),n=s(5695);const o={class:"flex-grow-1 d-flex flex-column h-100 p-2 bg-white rounded-start"},c={class:"d-flex align-items-center"},d={key:0},u={key:1,class:"flex-grow-1 overflow-scroll"},p={class:"tab-content",id:"nav-tabContent"},w={class:"tab-pane fade show active",id:"nav-user-reviews-panel",role:"tabpanel","aria-labelledby":"nav-user-reviews-tab"},f={key:0},k={key:1,class:"d-flex flex-column gap-1",id:"user-reviews"},b={class:"d-flex flex-column"},m={class:"m-0 fw-bold"},L={class:"m-0 small"},g={class:"m-0"},x={class:"m-0"},_={class:"tab-pane fade",id:"nav-professional-reviews-panel",role:"tabpanel","aria-labelledby":"nav-professional-reviews-tab"},E={key:0},h={key:1,class:"d-flex flex-column gap-1",id:"professional-reviews"},y={class:"d-flex flex-column"},C={class:"m-0 fw-bold"},R={class:"m-0 small"},X={class:"m-0"},N={class:"m-0"},A={key:1,class:"d-flex flex-column gap-1",id:"reviews"},F={key:0},K={class:"d-flex flex-column"},I={class:"m-0 fw-bold"},D={class:"m-0 small"},S={class:"m-0"},W={class:"m-0"},q={__name:"Reviews",setup(e){const a=(0,v.C)(),s=(0,r.KR)(!0),q=n.A.userInfo.isAdmin,U=(0,r.KR)("default"),V=(0,l.EW)((()=>{if("default"===U.value)return a.reviews;const e=parseInt(U.value);return n.A.isAdmin?{userReviews:a.reviews.userReviews.filter((a=>a.rating<=e)),professionalReviews:a.reviews.professionalReviews.filter((a=>a.rating<=e))}:a.reviews.filter((a=>a.rating<=e))}));return(0,l.sV)((()=>{fetch("/api/review").then((e=>e.json())).then((e=>{"success"===e.result?a.reviews=e.data.reviews:console.error("Failed to fetch reviews:",e.message)})).catch((e=>{console.error("Failed to fetch reviews:",e)})).finally((()=>{s.value=!1}))})),(e,a)=>((0,l.uX)(),(0,l.CE)("section",o,[(0,l.Lk)("section",c,[a[2]||(a[2]=(0,l.Lk)("div",{class:"input-group mr-sm-2 flex-grow-1",id:"service-search-wrapper"},[(0,l.Lk)("h2",null,"Reviews")],-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select",id:"reviews-sort","aria-label":"Sort","onUpdate:modelValue":a[0]||(a[0]=e=>U.value=e)},a[1]||(a[1]=[(0,l.Fv)('<option value="default" selected>Default</option><option value="1">&lt;= 1</option><option value="2">&lt;= 2</option><option value="3">&lt;= 3</option><option value="4">&lt;= 4</option>',5)]),512),[[i.u1,U.value]])]),a[10]||(a[10]=(0,l.Lk)("hr",null,null,-1)),s.value?((0,l.uX)(),(0,l.CE)("div",d,"Loading...")):((0,l.uX)(),(0,l.CE)("div",u,[(0,r.R1)(q)?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[a[7]||(a[7]=(0,l.Lk)("nav",null,[(0,l.Lk)("div",{class:"nav nav-tabs",id:"nav-tab",role:"tablist"},[(0,l.Lk)("button",{class:"nav-link active text-black",id:"nav-user-reviews-tab","data-bs-toggle":"tab","data-bs-target":"#nav-user-reviews-panel",type:"button",role:"tab","aria-controls":"nav-user-reviews-panel","aria-selected":"true"},"User Reviews"),(0,l.Lk)("button",{class:"nav-link text-black",id:"nav-professional-reviews-tab","data-bs-toggle":"tab","data-bs-target":"#nav-professional-reviews-panel",type:"button",role:"tab","aria-controls":"nav-professional-reviews-panel","aria-selected":"false"},"Professional Reviews")])],-1)),(0,l.Lk)("div",p,[(0,l.Lk)("div",w,[0===V.value.userReviews.length?((0,l.uX)(),(0,l.CE)("div",f,"No user reviews available.")):((0,l.uX)(),(0,l.CE)("div",k,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(V.value.userReviews,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"d-flex gap-4 border rounded p-2"},[a[4]||(a[4]=(0,l.Lk)("div",{class:"fs-1 align-self-center"},[(0,l.Lk)("i",{class:"bi bi-chat-square-text-fill"})],-1)),(0,l.Lk)("div",b,[(0,l.Lk)("p",m,(0,t.v_)(e.reviewerName)+"("+(0,t.v_)(e.reviewerEmail)+") --\x3e "+(0,t.v_)(e.revieweeName)+"("+(0,t.v_)(e.revieweeEmail)+") | "+(0,t.v_)(e.type),1),(0,l.Lk)("p",L,(0,t.v_)(new Date(e.createdAt).toLocaleString()),1),(0,l.Lk)("p",g,(0,t.v_)(e.review),1),(0,l.Lk)("p",x,[a[3]||(a[3]=(0,l.Lk)("span",{class:"fw-bold"},"Rating: ",-1)),(0,l.eW)((0,t.v_)(e.rating),1)])])])))),128))]))]),(0,l.Lk)("div",_,[0===V.value.professionalReviews.length?((0,l.uX)(),(0,l.CE)("div",E,"No professional reviews available.")):((0,l.uX)(),(0,l.CE)("div",h,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(V.value.professionalReviews,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"d-flex gap-4 border rounded p-2"},[a[6]||(a[6]=(0,l.Lk)("div",{class:"fs-1 align-self-center"},[(0,l.Lk)("i",{class:"bi bi-chat-square-text-fill"})],-1)),(0,l.Lk)("div",y,[(0,l.Lk)("p",C,(0,t.v_)(e.reviewerName)+"("+(0,t.v_)(e.reviewerEmail)+") --\x3e "+(0,t.v_)(e.revieweeName)+"("+(0,t.v_)(e.revieweeEmail)+") | "+(0,t.v_)(e.type),1),(0,l.Lk)("p",R,(0,t.v_)(new Date(e.createdAt).toLocaleString()),1),(0,l.Lk)("p",X,(0,t.v_)(e.review),1),(0,l.Lk)("p",N,[a[5]||(a[5]=(0,l.Lk)("span",{class:"fw-bold"},"Rating: ",-1)),(0,l.eW)((0,t.v_)(e.rating),1)])])])))),128))]))])])],64)):((0,l.uX)(),(0,l.CE)("div",A,[0===V.value.length?((0,l.uX)(),(0,l.CE)("div",F,"No reviews available.")):(0,l.Q3)("v-if",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(V.value,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"d-flex gap-4 border rounded p-2"},[a[9]||(a[9]=(0,l.Lk)("div",{class:"fs-1 align-self-center"},[(0,l.Lk)("i",{class:"bi bi-chat-square-text-fill"})],-1)),(0,l.Lk)("div",K,[(0,l.Lk)("p",I,(0,t.v_)(e.reviewerName)+"("+(0,t.v_)(e.reviewerEmail)+") --\x3e "+(0,t.v_)(e.revieweeName)+"("+(0,t.v_)(e.revieweeEmail)+") | "+(0,t.v_)(e.type),1),(0,l.Lk)("p",D,(0,t.v_)(new Date(Number(e.createdAt)).toLocaleString()),1),(0,l.Lk)("p",S,(0,t.v_)(e.review),1),(0,l.Lk)("p",W,[a[8]||(a[8]=(0,l.Lk)("span",{class:"fw-bold"},"Rating: ",-1)),(0,l.eW)((0,t.v_)(e.rating),1)])])])))),128))]))]))]))}}}}]);